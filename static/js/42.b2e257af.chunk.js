(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{945:function(e,t,a){"use strict";a.r(t);var n=a(17),l=a(12),r=a(13),c=a(15),s=a(14),o=a(16),u=a(142),i=a(2),m=a.n(i),p=a(48),d=a(131),h=a(132),f=a(117),E=a(121),y=a(62),b=a(118),g=a(110),v=a(47),k=a(49),S=a(73),C=a(149),O=a(52),w=a(50),x=a(28),j=a.n(x),I=a(5),A=a(175),q=a.n(A),R=a(470),D=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(s.a)(t).call(this,e))).isValidEmailAddress=function(e){return!!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)},a.firstUpper=function(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},a.rerenderParentCallback=function(){Object(w.G)(a.state.xtoken).then(function(e){a.setState(Object(n.a)({},a.state,{data:e.data}))}).catch(function(e){})},a.handleTypeInput=function(e){var t=e.target.value;1===parseInt(t)?a.setState(Object(n.a)({},a.state,{type:t,showmore:!0})):parseInt(t)>1&&a.setState(Object(n.a)({},a.state,{type:t,showmore:!1}))},a.handleTruckInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{truck:t}))},a.handleAmountInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{amount:t}))},a.handleDescriptionInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{description:t}))},a.handleInstallmentInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{installment:t}))},a.handleFrequencyInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{frequency:t}))},a.handleCityInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{city:t}))},a.handleStateInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{state:t}))},a.handleMscAmountInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{misc_amount:t}))},a.handleSaveChanges=function(){a.setState(Object(n.a)({},a.state,{preload:!0})),Object(w.Y)(a.state.xtoken,a.state).then(function(e){200===e.status?(a.setState(Object(n.a)({},a.state,{type:"nn",truck:"nn",amount:"",description:"",installment:"",frequency:"nn",city:"",state:"nn",misc_amount:"",msg:e.message,data:e.data,preload:!1,error:""})),a.forceUpdate()):a.setState(Object(n.a)({},a.state,{error:e.message,preload:!1,msg:""}))}).catch(function(e){a.setState(Object(n.a)({},a.state,{error:"Connection error occured",preload:!1})),console.log("error",e)})},a.state={type:"nn",truck:"nn",amount:"",description:"",installment:"",frequency:"nn",city:"",state:"nn",misc_amount:"",xtoken:"",msg:"",error:"",downloadFile:!0,preload:!1,showmore:!0,data:[],trucks:[],groups:[]},j.a.getItem(I.a.secret).then(function(e){if(null!==e){var t=JSON.parse(e);a.setState(Object(n.a)({},a.state,{xtoken:t.user.token})),Object(w.G)(t.user.token).then(function(e){a.setState(Object(n.a)({},a.state,{data:e.data}))}).catch(function(e){}),Object(w.P)(t.user.token).then(function(e){a.setState(Object(n.a)({},a.state,{trucks:e.data}))}).catch(function(e){}),Object(w.F)(t.user.token).then(function(e){a.setState(Object(n.a)({},a.state,{groups:e.data}))}).catch(function(e){})}}).catch(function(e){console.log("storage error",e)}),a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=[{name:"Id",options:{display:!1}},{name:"Gid",options:{display:"excluded"}},{name:"Tid",options:{display:"excluded"}},"Description","Truck",{name:"Amount",options:{display:!0,customBodyRender:function(e,t,a){return m.a.createElement(p.a,null,"$",e)}}},{name:"Group",options:{display:!1}},{name:"Installment",options:{display:!0,customBodyRender:function(e,t,a){return m.a.createElement(p.a,null,"$",e)}}},{name:"Frequency",options:{display:!0,customBodyRender:function(e,t,a){return m.a.createElement(p.a,null,e)}}},{name:"City",options:{display:!0}},{name:"State",options:{display:!0}},{name:"Msc. Amount",options:{display:!0}}],a={filter:!0,selectableRows:"single",selectableRowsOnClick:!0,filterType:"dropdown",responsive:"vertical",draggableColumns:{enabled:!0},rowsPerPage:5,selectToolbarPlacement:"replace",customToolbarSelect:function(t,a,n){return m.a.createElement(R.a,{rerenderParentCallback:e.rerenderParentCallback,selectedRows:t,displayData:a,setSelectedRows:n,originalData:e.state.data,Xtoken:e.state.xtoken})},downloadOptions:{filename:"all-expenses-excel-format.csv",separator:";",filterOptions:{useDisplayedColumnsOnly:!0,useDisplayedRowsOnly:!0}},onDownload:function(t,a,n,l){return!!e.state.downloadFile&&"".concat(t(n)).concat(a(l)).trim()},onRowSelectionChange:function(e,t,a){},onRowsDelete:function(e){},onChangePage:function(e){},onSearchChange:function(e){},onColumnSortChange:function(e,t){},onViewColumnsChange:function(e,t){},onFilterChange:function(e,t){},onCellClick:function(e,t){},onRowClick:function(e,t){}};return m.a.createElement(u.a,{title:"Expenses",breadcrumbs:[{name:"Expenses",active:!0}]},m.a.createElement(d.a,null,m.a.createElement(h.a,{xl:12,lg:12,md:12},m.a.createElement(f.a,null,m.a.createElement(E.a,null,"Create expense",this.state.preload&&m.a.createElement(O.a,null)),this.state.error.length>0&&m.a.createElement(y.a,{color:"danger"},this.state.error),this.state.msg.length>0&&m.a.createElement(y.a,{color:"success"},this.state.msg)))),m.a.createElement(d.a,null,m.a.createElement(h.a,{xl:4,lg:12,md:12},m.a.createElement(f.a,null,m.a.createElement(b.a,null,m.a.createElement(g.a,null,m.a.createElement(v.a,null,m.a.createElement(p.a,{for:"exampleSelect"},"Expense type*"),m.a.createElement(k.a,{onChange:this.handleTypeInput,value:this.state.type,defaultValue:this.state.type,type:"select",name:"type"},m.a.createElement("option",{value:"nn",disabled:!0},"Select type"),this.state.groups.map(function(e,t){return m.a.createElement("option",{key:t,value:e.id},e.name)}))),m.a.createElement(v.a,null,m.a.createElement(p.a,{for:"exampleSelect"},"Related truck*"),m.a.createElement(k.a,{onChange:this.handleTruckInput,value:this.state.truck,defaultValue:this.state.truck,type:"select",name:"truck"},m.a.createElement("option",{value:"nn",disabled:!0},"Select truck"),this.state.trucks.map(function(t,a){return m.a.createElement("option",{key:a,value:t.id},e.firstUpper(t.make)+" - "+t.number)}))),m.a.createElement(v.a,null,m.a.createElement(p.a,{for:"exampleEmail"},"Full deduction amount($)*"),m.a.createElement(k.a,{onChange:this.handleAmountInput,type:"number",value:this.state.amount,name:"amt",placeholder:""})))))),m.a.createElement(h.a,{xl:4,lg:12,md:12},m.a.createElement(f.a,null,m.a.createElement(b.a,null,m.a.createElement(g.a,null,m.a.createElement(v.a,null,m.a.createElement(p.a,{for:"examplePassword"},"Description*"),m.a.createElement(k.a,{onChange:this.handleDescriptionInput,type:"text",value:this.state.description,name:"origin",placeholder:""})),this.state.showmore&&m.a.createElement("div",null,m.a.createElement(v.a,null,m.a.createElement(p.a,{for:"exampleEmail"},"Installment($)*"),m.a.createElement(k.a,{onChange:this.handleInstallmentInput,type:"number",value:this.state.installment,name:"installment",placeholder:""}))),!this.state.showmore&&m.a.createElement("div",null,m.a.createElement(v.a,null,m.a.createElement(p.a,{for:"exampleNumber"},"City*"),m.a.createElement(k.a,{onChange:this.handleCityInput,type:"text",value:this.state.city,name:"rate",id:"rate",placeholder:""}))))))),m.a.createElement(h.a,{xl:4,lg:12,md:12},m.a.createElement(f.a,null,m.a.createElement(b.a,null,m.a.createElement(g.a,null,this.state.showmore&&m.a.createElement("div",null,m.a.createElement(v.a,null,m.a.createElement(p.a,{for:"exampleSelect"},"Frequency*"),m.a.createElement(k.a,{onChange:this.handleFrequencyInput,value:this.state.frequency,defaultValue:this.state.frequency,type:"select",name:"freq"},m.a.createElement("option",{value:"nn",disabled:!0},"Select frequency"),m.a.createElement("option",{value:"Weekly"},"Weekly"),m.a.createElement("option",{value:"Monthily"},"Monthily")))),!this.state.showmore&&m.a.createElement("div",null,m.a.createElement(v.a,null,m.a.createElement(p.a,{for:"exampleSelect"},"State*"),m.a.createElement(k.a,{onChange:this.handleStateInput,value:this.state.state,defaultValue:this.state.state,type:"select",name:"state"},m.a.createElement("option",{value:"nn",disabled:!0},"Select state"),C.a.data.map(function(e,t){return m.a.createElement("option",{key:t,value:e.abbreviation},e.name)}))),m.a.createElement(v.a,null,m.a.createElement(p.a,{for:"exampleNumber"},"Misc. Amount($)*"),m.a.createElement(k.a,{onChange:this.handleMscAmountInput,type:"number",value:this.state.misc_amount,name:"misc",id:"misc",placeholder:""}))),m.a.createElement(v.a,{check:!0,row:!0},m.a.createElement(h.a,{sm:{size:10,offset:2}},m.a.createElement(S.a,{type:"button",onClick:this.handleSaveChanges},"Add expense")))))))),m.a.createElement(d.a,null,m.a.createElement(h.a,{xl:12,lg:12,md:12},m.a.createElement(f.a,null,m.a.createElement(b.a,null,m.a.createElement(q.a,{title:"Expenses",data:this.state.data.map(function(e){return[e.id,e.type,e.truck,e.description,e.tlabel,e.amount,e.glabel,e.installment,e.frequency,e.city,e.state,e.misc_amount]}),columns:t,options:a}))))))}}]),t}(m.a.Component);t.default=D}}]);
//# sourceMappingURL=42.b2e257af.chunk.js.map