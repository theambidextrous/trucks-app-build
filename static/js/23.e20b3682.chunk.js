(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{141:function(e,a,t){"use strict";var n=t(34),l=t(10),r=t(4),s=t.n(r),c=t(2),o=t.n(c),m=(t(23),{h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6","display-1":"h1","display-2":"h1","display-3":"h1","display-4":"h1",p:"p",lead:"p",blockquote:"blockquote"}),u=function(e){var a,t=e.tag,r=e.className,c=e.type,u=Object(l.a)(e,["tag","className","type"]),i=s()(Object(n.a)({},c,!!c),r);return a=t||(!t&&m[c]?m[c]:"p"),o.a.createElement(a,Object.assign({},u,{className:i}))};u.defaultProps={type:"p"},a.a=u},142:function(e,a,t){"use strict";var n=t(10),l=t(2),r=t.n(l),s=(t(23),t(27)),c=t(153),o=t(154),m=t(141),u=s.a.create("page"),i=function(e){var a=e.title,t=e.breadcrumbs,l=e.tag,s=e.className,i=e.children,d=Object(n.a)(e,["title","breadcrumbs","tag","className","children"]),p=u.b("px-3",s);return r.a.createElement(l,Object.assign({className:p},d),r.a.createElement("div",{className:u.e("header")},a&&"string"===typeof a?r.a.createElement(m.a,{type:"h1",className:u.e("title")},a):a,t&&r.a.createElement(c.a,{className:u.e("breadcrumb")},r.a.createElement(o.a,null,"iTruck IO"),t.length&&t.map(function(e,a){var t=e.name,n=e.active;return r.a.createElement(o.a,{key:a,active:n},t)}))),i)};i.defaultProps={tag:"div",title:""},a.a=i},153:function(e,a,t){"use strict";var n=t(5),l=t(7),r=t(2),s=t.n(r),c=t(1),o=t.n(c),m=t(4),u=t.n(m),i=t(3),d={tag:i.q,listTag:i.q,className:o.a.string,listClassName:o.a.string,cssModule:o.a.object,children:o.a.node,"aria-label":o.a.string},p=function(e){var a=e.className,t=e.listClassName,r=e.cssModule,c=e.children,o=e.tag,m=e.listTag,d=e["aria-label"],p=Object(l.a)(e,["className","listClassName","cssModule","children","tag","listTag","aria-label"]),h=Object(i.m)(u()(a),r),b=Object(i.m)(u()("breadcrumb",t),r);return s.a.createElement(o,Object(n.a)({},p,{className:h,"aria-label":d}),s.a.createElement(m,{className:b},c))};p.propTypes=d,p.defaultProps={tag:"nav",listTag:"ol","aria-label":"breadcrumb"},a.a=p},154:function(e,a,t){"use strict";var n=t(5),l=t(7),r=t(2),s=t.n(r),c=t(1),o=t.n(c),m=t(4),u=t.n(m),i=t(3),d={tag:i.q,active:o.a.bool,className:o.a.string,cssModule:o.a.object},p=function(e){var a=e.className,t=e.cssModule,r=e.active,c=e.tag,o=Object(l.a)(e,["className","cssModule","active","tag"]),m=Object(i.m)(u()(a,!!r&&"active","breadcrumb-item"),t);return s.a.createElement(c,Object(n.a)({},o,{className:m,"aria-current":r?"page":void 0}))};p.propTypes=d,p.defaultProps={tag:"li"},a.a=p},219:function(e,a,t){"use strict";a.a={data:[{name:"1%",value:1},{name:"2%",value:2},{name:"3%",value:3},{name:"4%",value:4},{name:"5%",value:5},{name:"6%",value:6},{name:"7%",value:7},{name:"8%",value:8},{name:"9%",value:9},{name:"10%",value:10},{name:"11%",value:11},{name:"12%",value:12},{name:"13%",value:13},{name:"14%",value:14},{name:"15%",value:15},{name:"16%",value:16},{name:"17%",value:17},{name:"18%",value:18},{name:"19%",value:19},{name:"20%",value:20},{name:"21%",value:21},{name:"22%",value:22},{name:"23%",value:23},{name:"24%",value:24},{name:"25%",value:25},{name:"26%",value:26},{name:"27%",value:27},{name:"28%",value:28},{name:"29%",value:29},{name:"30%",value:30}]}},314:function(e,a,t){"use strict";var n=t(5),l=t(7),r=t(2),s=t.n(r),c=t(1),o=t.n(c),m=t(4),u=t.n(m),i=t(3),d={className:o.a.string,cssModule:o.a.object,size:o.a.string,bordered:o.a.bool,borderless:o.a.bool,striped:o.a.bool,inverse:Object(i.h)(o.a.bool,'Please use the prop "dark"'),dark:o.a.bool,hover:o.a.bool,responsive:o.a.oneOfType([o.a.bool,o.a.string]),tag:i.q,responsiveTag:i.q,innerRef:o.a.oneOfType([o.a.func,o.a.string,o.a.object])},p=function(e){var a=e.className,t=e.cssModule,r=e.size,c=e.bordered,o=e.borderless,m=e.striped,d=e.inverse,p=e.dark,h=e.hover,b=e.responsive,v=e.tag,E=e.responsiveTag,f=e.innerRef,g=Object(l.a)(e,["className","cssModule","size","bordered","borderless","striped","inverse","dark","hover","responsive","tag","responsiveTag","innerRef"]),O=Object(i.m)(u()(a,"table",!!r&&"table-"+r,!!c&&"table-bordered",!!o&&"table-borderless",!!m&&"table-striped",!(!p&&!d)&&"table-dark",!!h&&"table-hover"),t),j=s.a.createElement(v,Object(n.a)({},g,{ref:f,className:O}));if(b){var y=!0===b?"table-responsive":"table-responsive-"+b;return s.a.createElement(E,{className:y},j)}return j};p.propTypes=d,p.defaultProps={tag:"table",responsiveTag:"div"},a.a=p},945:function(e,a,t){"use strict";t.r(a);var n=t(17),l=t(12),r=t(13),s=t(15),c=t(14),o=t(16),m=t(142),u=t(2),i=t.n(u),d=t(955),p=t(131),h=t(132),b=t(117),v=t(121),E=t(62),f=t(118),g=t(110),O=t(47),j=t(48),y=t(49),N=t(73),S=t(314),k=t(9),x=t(52),D=t(50),C=t(28),w=t.n(C),T=t(6),I=t(219),M=function(e){function a(e){var t;return Object(l.a)(this,a),(t=Object(s.a)(this,Object(c.a)(a).call(this,e))).format_date_str=function(e){var a=e.split("-"),t=a[2].slice(0,2);return Object(d.a)(new Date(a[0],a[1],t),"MM/dd/yyyy")},t.firstUpper=function(e){var a=e.toLowerCase();return a.charAt(0).toUpperCase()+a.slice(1)},t.removeItemOnce=function(e,a){var t=e.indexOf(a);return t>-1&&e.splice(t,1),e},t.handleDropCol=function(e,a,l){l.preventDefault(),t.setState(Object(n.a)({},t.state,{preload:!0}));var r=t.state.except;r.push(e);var s=t.state.summations.a.replace(",","")-a.replace(",",""),c=s-t.state.summations.b.replace(",","");if(parseInt(s)<=0)t.setState(Object(n.a)({},t.state,{preload:!1,except:t.removeItemOnce(t.state.except,e)}));else{var o=[];t.state.trips.forEach(function(a){a.id!==e&&o.push(a)}),t.setState(Object(n.a)({},t.state,{except:r,trips:o,summations:{a:s.toFixed(2),b:t.state.summations.b,c:c.toFixed(2)},preload:!1}))}},t.handleStartDateInput=function(e){var a=e.target.value;t.setState(Object(n.a)({},t.state,{from_date:a}))},t.handleEndDateInput=function(e){var a=e.target.value;t.setState(Object(n.a)({},t.state,{to_date:a}))},t.handleDispatcherInput=function(e){var a=e.target.value;t.setState(Object(n.a)({},t.state,{dispatcher:a}))},t.handleRateInput=function(e){var a=e.target.value;t.setState(Object(n.a)({},t.state,{rate:a}))},t.handleSaveChanges=function(){t.setState(Object(n.a)({},t.state,{preload:!0})),Object(D.z)(t.state.xtoken,t.state).then(function(e){200===e.status?(t.setState(Object(n.a)({},t.state,{msg:e.message,except:[],trips:e.trips,advances:e.advances,summations:e.summations,preload:!1,error:""})),t.forceUpdate()):t.setState(Object(n.a)({},t.state,{error:e.message,preload:!1,msg:""}))}).catch(function(e){t.setState(Object(n.a)({},t.state,{error:"Connection error occured",preload:!1})),console.log("error",e)})},t.handleDownloadReport=function(){t.setState(Object(n.a)({},t.state,{preload:!0})),Object(D.i)(t.state.xtoken,t.state).then(function(e){if(200===e.status){var a=e.fileurl,l=document.createElement("a");l.href=a,l.setAttribute("download","statement"),l.setAttribute("target","_blank"),l.click(),t.setState(Object(n.a)({},t.state,{preload:!1,fileurl:e.fileurl,error:""})),t.forceUpdate()}else t.setState(Object(n.a)({},t.state,{error:e.message,preload:!1,msg:""}))}).catch(function(e){t.setState(Object(n.a)({},t.state,{error:"Connection error occured",preload:!1})),console.log("error",e)})},t.state={dispatcher:"nn",rate:"nn",from_date:"",to_date:"",xtoken:"",msg:"",error:"",fileurl:"",downloadFile:!0,preload:!1,trips:[],advances:[],except:[],summations:{a:"0.00",b:"0.00",c:"0.00"},dispatchers:[]},w.a.getItem(T.a.secret).then(function(e){if(null!==e){var a=JSON.parse(e);t.setState(Object(n.a)({},t.state,{xtoken:a.user.token})),Object(D.L)(a.user.token).then(function(e){t.setState(Object(n.a)({},t.state,{dispatchers:e.data}))}).catch(function(e){})}}).catch(function(e){console.log("storage error",e)}),t}return Object(o.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement(m.a,{title:"Dispatcher earning",breadcrumbs:[{name:"Earnings",active:!0}]},i.a.createElement(p.a,null,i.a.createElement(h.a,{xl:12,lg:12,md:12},i.a.createElement(b.a,null,i.a.createElement(v.a,null,"Dispatcher reports",this.state.preload&&i.a.createElement(x.a,null)),this.state.error.length>0&&i.a.createElement(E.a,{color:"danger"},this.state.error)))),i.a.createElement(p.a,null,i.a.createElement(h.a,{xl:3,lg:12,md:12},i.a.createElement(b.a,null,i.a.createElement(f.a,null,i.a.createElement(g.a,null,i.a.createElement(O.a,null,i.a.createElement(j.a,{for:"exampleSelect"},"Start date*"),i.a.createElement(y.a,{onChange:this.handleStartDateInput,type:"date",value:this.state.from_date,name:"fromdate",placeholder:""})),i.a.createElement(O.a,null,i.a.createElement(j.a,{for:"exampleSelect"},"End date*"),i.a.createElement(y.a,{onChange:this.handleEndDateInput,type:"date",value:this.state.to_date,name:"todate",placeholder:""})),i.a.createElement(O.a,null,i.a.createElement(j.a,{for:"exampleSelect"},"Dispatcher*"),i.a.createElement(y.a,{onChange:this.handleDispatcherInput,value:this.state.dispatcher,defaultValue:this.state.dispatcher,type:"select",name:"driver"},i.a.createElement("option",{value:"nn",disabled:!0},"Select Dispatcher"),this.state.dispatchers.map(function(a,t){return i.a.createElement("option",{key:t,value:a.id},e.firstUpper(a.fname)+" "+a.lname)}))),i.a.createElement(O.a,null,i.a.createElement(j.a,{for:"exampleSelect"},"Rate*"),i.a.createElement(y.a,{onChange:this.handleRateInput,value:this.state.rate,defaultValue:this.state.rate,type:"select",name:"driver"},i.a.createElement("option",{value:"nn",disabled:!0},"Select rate"),I.a.data.map(function(e,a){return i.a.createElement("option",{key:a,value:e.value},e.name)}))),i.a.createElement(p.a,null,i.a.createElement(h.a,{xl:6,lg:12,md:12},i.a.createElement(O.a,null,i.a.createElement(N.a,{type:"button",onClick:this.handleSaveChanges},"Run report"))),i.a.createElement(h.a,{xl:6,lg:12,md:12},i.a.createElement(O.a,null,i.a.createElement(N.a,{type:"button",onClick:this.handleDownloadReport},"Download")))))))),i.a.createElement(h.a,{xl:9,lg:12,md:12},i.a.createElement(b.a,null,i.a.createElement(v.a,{className:"statement-head"},"Trips"),i.a.createElement(f.a,null,i.a.createElement(S.a,{responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Trip"),i.a.createElement("th",null,"Description"),i.a.createElement("th",null,"Date"),i.a.createElement("th",null,"Load rate"),i.a.createElement("th",null,"Net rate"),i.a.createElement("th",null,"Dispatcher rate"))),i.a.createElement("tbody",null,this.state.trips.map(function(a,t){return i.a.createElement("tr",null,i.a.createElement("th",{scope:"row"},a.number),i.a.createElement("td",null,a.origin," - ",a.destination),i.a.createElement("td",null,e.format_date_str(a.created_at)),i.a.createElement("td",null,"$",a.rate),i.a.createElement("td",null,"$",a.net),i.a.createElement("td",null,"$",a.pay," ",i.a.createElement(k.b,{onClick:function(t){return e.handleDropCol(a.id,a.pay,t)},title:"remove",className:"red-icon"})))}),i.a.createElement("tr",null,i.a.createElement("th",{colSpan:"4"}),i.a.createElement("td",null,i.a.createElement("b",null,"Earning")),i.a.createElement("td",null,i.a.createElement("b",null,"$",this.state.summations.a)))))),i.a.createElement(v.a,{className:"statement-head"},"Advances"),i.a.createElement(f.a,null,i.a.createElement(S.a,{responsive:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"#No."),i.a.createElement("th",null,"Payable period"),i.a.createElement("th",null,"Amount"),i.a.createElement("th",null,"Subtotal"))),i.a.createElement("tbody",null,this.state.advances.map(function(e,a){return i.a.createElement("tr",null,i.a.createElement("th",{scope:"row"},e.id),i.a.createElement("td",null,"Between ",e.payfrom," and ",e.payto),i.a.createElement("td",null,"$",e.amount),i.a.createElement("td",null,"($",e.amount,")"))}),i.a.createElement("tr",null,i.a.createElement("th",{colSpan:"2"}),i.a.createElement("td",null,i.a.createElement("b",null,"Advance")),i.a.createElement("td",null,i.a.createElement("b",null,"($",this.state.summations.b,")"))),i.a.createElement("tr",null,i.a.createElement("td",{colSpan:"4"})),i.a.createElement("tr",{className:"statement-check"},i.a.createElement("td",{colSpan:"2"}),i.a.createElement("td",null,i.a.createElement("b",null,"Net Pay")),i.a.createElement("td",null,i.a.createElement("b",null,"$",this.state.summations.c))))))))))}}]),a}(i.a.Component);a.default=M}}]);
//# sourceMappingURL=23.e20b3682.chunk.js.map