(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{926:function(e,t,a){"use strict";a.r(t);var n=a(10),r=a(12),l=a(13),c=a(15),o=a(14),s=a(16),i=a(138),u=a(1),m=a.n(u),p=a(104),d=a(105),h=a(106),E=a(107),f=a(108),g=a(117),b=a(103),k=a(109),x=a(110),v=a(111),w=a(112),O=a(28),C=a(27),y=a.n(C),I=a(4),j=a(161),S=a.n(j),T=a(30),_=a(463),R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).rerenderParentCallback=function(){Object(O.X)(a.state.xtoken).then(function(e){a.setState(Object(n.a)({},a.state,{data:e.data}))}).catch(function(e){})},a.handleNumberInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{number:t}))},a.handleOwnerInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{owner:t}))},a.handleMakeInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{make:t}))},a.handleVinInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{vin:t}))},a.handleInsExpInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{insurance_expires:t}))},a.handleInspeExpInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{inspection_expires:t}))},a.handleRegExpInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{registration_expires:t}))},a.handleSaveChanges=function(){a.setState(Object(n.a)({},a.state,{preload:!0})),Object(O.mb)(a.state.xtoken,a.state).then(function(e){200===e.status?(a.setState(Object(n.a)({},a.state,{number:"",owner:"nn",make:"",vin:"",insurance_expires:"",inspection_expires:"",registration_expires:"",msg:e.message,data:e.data,error:"",preload:!1})),a.forceUpdate()):a.setState(Object(n.a)({},a.state,{error:e.message,msg:"",preload:!1}))}).catch(function(e){a.setState(Object(n.a)({},a.state,{error:"Connection error occured",preload:!1})),console.log("error",e)})},a.state={number:"",owner:"nn",make:"",vin:"",insurance_expires:"",inspection_expires:"",registration_expires:"",xtoken:"",msg:"",error:"",downloadFile:!0,preload:!1,data:[],owners:[]},y.a.getItem(I.a.secret).then(function(e){if(null!==e){var t=JSON.parse(e);a.setState(Object(n.a)({},a.state,{xtoken:t.user.token})),Object(O.B)(t.user.token).then(function(e){1===parseInt(e.expired)&&(window.location.href="/bills/payment")}).catch(function(e){return console.log(e)}),Object(O.X)(t.user.token).then(function(e){a.setState(Object(n.a)({},a.state,{data:e.data}))}).catch(function(e){}),Object(O.S)(t.user.token).then(function(e){a.setState(Object(n.a)({},a.state,{owners:e.data}))}).catch(function(e){})}}).catch(function(e){console.log("storage error",e)}),a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t={filter:!0,selectableRows:"single",selectableRowsOnClick:!0,filterType:"dropdown",responsive:"vertical",draggableColumns:{enabled:!0},rowsPerPage:5,selectToolbarPlacement:"replace",customToolbarSelect:function(t,a,n){return m.a.createElement(_.a,{rerenderParentCallback:e.rerenderParentCallback,selectedRows:t,displayData:a,setSelectedRows:n,originalData:e.state.data,Xtoken:e.state.xtoken})},downloadOptions:{filename:"trucks-excel-format.csv",separator:";",filterOptions:{useDisplayedColumnsOnly:!0,useDisplayedRowsOnly:!0}},onDownload:function(t,a,n,r){return!!e.state.downloadFile&&"".concat(t(n)).concat(a(r)).trim()},onRowSelectionChange:function(e,t,a){},onRowsDelete:function(e){},onChangePage:function(e){},onSearchChange:function(e){},onColumnSortChange:function(e,t){},onViewColumnsChange:function(e,t){},onFilterChange:function(e,t){},onCellClick:function(e,t){},onRowClick:function(e,t){}};return m.a.createElement(i.a,{title:"Trucks",breadcrumbs:[{name:"Trucks",active:!0}]},m.a.createElement(p.a,null,m.a.createElement(d.a,{xl:12,lg:12,md:12},m.a.createElement(h.a,null,m.a.createElement(E.a,null,"Create Truck"),this.state.preload&&m.a.createElement(T.a,null),this.state.error.length>0&&m.a.createElement(f.a,{color:"danger"},this.state.error),this.state.msg.length>0&&m.a.createElement(f.a,{color:"success"},this.state.msg)))),m.a.createElement(p.a,null,m.a.createElement(d.a,{xl:4,lg:12,md:12},m.a.createElement(h.a,null,m.a.createElement(g.a,null,m.a.createElement(b.a,null,m.a.createElement(k.a,null,m.a.createElement(x.a,{for:"exampleEmail"},"Truck Reg. Number*"),m.a.createElement(v.a,{onChange:this.handleNumberInput,type:"text",value:this.state.number,name:"number",placeholder:""})),m.a.createElement(k.a,null,m.a.createElement(x.a,{for:"exampleEmail"},"Truck Owner*"),m.a.createElement(v.a,{onChange:this.handleOwnerInput,value:this.state.owner,defaultValue:this.state.owner,type:"select",name:"owner"},m.a.createElement("option",{value:"nn",disabled:!0},"Select owner"),this.state.owners.map(function(e,t){return m.a.createElement("option",{key:t,value:e.id},e.company)}))),m.a.createElement(k.a,null,m.a.createElement(x.a,{for:"exampleEmail"},"Truck Make*"),m.a.createElement(v.a,{onChange:this.handleMakeInput,type:"text",value:this.state.make,name:"make",placeholder:""})))))),m.a.createElement(d.a,{xl:4,lg:12,md:12},m.a.createElement(h.a,null,m.a.createElement(g.a,null,m.a.createElement(b.a,null,m.a.createElement(k.a,null,m.a.createElement(x.a,{for:"examplePassword"},"Truck VIN*"),m.a.createElement(v.a,{onChange:this.handleVinInput,type:"text",value:this.state.vin,name:"vin",placeholder:""})),m.a.createElement(k.a,null,m.a.createElement(x.a,{for:"exampleEmail"},"Insurance Expiry*"),m.a.createElement(v.a,{onChange:this.handleInsExpInput,type:"date",value:this.state.insurance_expires,name:"make",placeholder:""})),m.a.createElement(k.a,null,m.a.createElement(x.a,{for:"exampleEmail"},"Inspection Expiry*"),m.a.createElement(v.a,{onChange:this.handleInspeExpInput,type:"date",value:this.state.inspection_expires,name:"make",placeholder:""})))))),m.a.createElement(d.a,{xl:4,lg:12,md:12},m.a.createElement(h.a,null,m.a.createElement(g.a,null,m.a.createElement(b.a,null,m.a.createElement(k.a,null,m.a.createElement(x.a,{for:"exampleEmail"},"Registration Expiry*"),m.a.createElement(v.a,{onChange:this.handleRegExpInput,type:"date",value:this.state.registration_expires,name:"make",placeholder:""})),m.a.createElement(k.a,{check:!0,row:!0},m.a.createElement(d.a,{sm:{size:10,offset:2}},m.a.createElement(w.a,{type:"button",onClick:this.handleSaveChanges},"Add truck")))))))),m.a.createElement(p.a,null,m.a.createElement(d.a,{xl:12,lg:12,md:12},m.a.createElement(h.a,null,m.a.createElement(g.a,null,m.a.createElement(S.a,{title:"Trucks",data:this.state.data.map(function(e){return[e.id,e.owner,e.number,e.company,e.make,e.vin,e.insurance_expires,e.inspection_expires,e.registration_expires]}),columns:[{name:"Id",options:{display:!0}},{name:"Oid",options:{display:!1}},"Truck No.","Truck Owner","Truck Make","Truck VIN","Insurance Expiry","Inspection Expiry","Registration Expiry"],options:t}))))))}}]),t}(m.a.Component);t.default=R}}]);
//# sourceMappingURL=33.360cfdde.chunk.js.map