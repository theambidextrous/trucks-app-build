(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{930:function(e,t,a){"use strict";a.r(t);var n=a(10),l=a(12),o=a(13),c=a(15),r=a(14),s=a(16),u=a(140),i=a(1),d=a.n(i),m=a(110),p=a(104),h=a(105),f=a(106),E=a(107),b=a(108),g=a(117),y=a(103),C=a(109),x=a(111),w=a(112),O=(a(142),a(30)),v=a(29),k=a(27),S=a.n(k),j=a(4),D=a(162),R=a.n(D),P=a(463),I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(r.a)(t).call(this,e))).firstUpper=function(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)},a.rerenderParentCallback=function(){Object(v.F)(a.state.xtoken).then(function(e){a.setState(Object(n.a)({},a.state,{data:e.data}))}).catch(function(e){})},a.handleExpenseInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{expense:t}))},a.handleDeductedInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{deducted:t}))},a.handlePaymentDateInput=function(e){var t=e.target.value;a.setState(Object(n.a)({},a.state,{payment_date:t}))},a.handleSaveChanges=function(){a.setState(Object(n.a)({},a.state,{preload:!0})),Object(v.eb)(a.state.xtoken,a.state).then(function(e){200===e.status?(a.setState(Object(n.a)({},a.state,{expense:"nn",deducted:"",payment_date:"",msg:e.message,data:e.data,preload:!1,error:""})),a.forceUpdate()):a.setState(Object(n.a)({},a.state,{error:e.message,preload:!1,msg:""}))}).catch(function(e){a.setState(Object(n.a)({},a.state,{error:"Connection error occured",preload:!1})),console.log("error",e)})},a.state={expense:"nn",deducted:"",payment_date:"",xtoken:"",msg:"",error:"",downloadFile:!0,preload:!1,showmore:!0,data:[],expenses:[]},S.a.getItem(j.a.secret).then(function(e){if(null!==e){var t=JSON.parse(e);a.setState(Object(n.a)({},a.state,{xtoken:t.user.token})),Object(v.F)(t.user.token).then(function(e){a.setState(Object(n.a)({},a.state,{data:e.data}))}).catch(function(e){}),Object(v.G)(t.user.token).then(function(e){a.setState(Object(n.a)({},a.state,{expenses:e.data}))}).catch(function(e){})}}).catch(function(e){console.log("storage error",e)}),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=[{name:"Expense",options:{display:!0}},{name:"Payment Date",options:{display:!0,customBodyRender:function(e,t,a){return d.a.createElement(m.a,null,e)}}},{name:"This installment",options:{display:!0,customBodyRender:function(e,t,a){return d.a.createElement(m.a,null,"$",e)}}},{name:"Total deduction",options:{display:!0,customBodyRender:function(e,t,a){return d.a.createElement(m.a,null,"$",e)}}},{name:"Sum paid",options:{display:!0,customBodyRender:function(e,t,a){return d.a.createElement(m.a,null,"$",e)}}},{name:"Balance",options:{display:!0,customBodyRender:function(e,t,a){return d.a.createElement(m.a,null,"$",e)}}}],a={filter:!0,selectableRows:"none",selectableRowsOnClick:!0,filterType:"dropdown",responsive:"vertical",draggableColumns:{enabled:!0},rowsPerPage:5,selectToolbarPlacement:"replace",customToolbarSelect:function(t,a,n){return d.a.createElement(P.a,{rerenderParentCallback:e.rerenderParentCallback,selectedRows:t,displayData:a,setSelectedRows:n,originalData:e.state.data,Xtoken:e.state.xtoken})},downloadOptions:{filename:"all-expenses-excel-format.csv",separator:";",filterOptions:{useDisplayedColumnsOnly:!0,useDisplayedRowsOnly:!0}},onDownload:function(t,a,n,l){return!!e.state.downloadFile&&"".concat(t(n)).concat(a(l)).trim()},onRowSelectionChange:function(e,t,a){},onRowsDelete:function(e){},onChangePage:function(e){},onSearchChange:function(e){},onColumnSortChange:function(e,t){},onViewColumnsChange:function(e,t){},onFilterChange:function(e,t){},onCellClick:function(e,t){},onRowClick:function(e,t){}};return d.a.createElement(u.a,{title:"Deductions",breadcrumbs:[{name:"Deductions",active:!0}]},d.a.createElement(p.a,null,d.a.createElement(h.a,{xl:12,lg:12,md:12},d.a.createElement(f.a,null,d.a.createElement(E.a,null,"Create deduction",this.state.preload&&d.a.createElement(O.a,null)),this.state.error.length>0&&d.a.createElement(b.a,{color:"danger"},this.state.error),this.state.msg.length>0&&d.a.createElement(b.a,{color:"success"},this.state.msg)))),d.a.createElement(p.a,null,d.a.createElement(h.a,{xl:4,lg:12,md:12},d.a.createElement(f.a,null,d.a.createElement(g.a,null,d.a.createElement(y.a,null,d.a.createElement(C.a,null,d.a.createElement(m.a,{for:"exampleSelect"},"Expense*"),d.a.createElement(x.a,{onChange:this.handleExpenseInput,value:this.state.type,defaultValue:this.state.expense,type:"select",name:"type"},d.a.createElement("option",{value:"nn",disabled:!0},"Select expense"),this.state.expenses.map(function(e,t){return d.a.createElement("option",{key:t,value:e.id},e.label)}))),d.a.createElement(C.a,null,d.a.createElement(m.a,{for:"examplePassword"},"Deduction amount($)*"),d.a.createElement(x.a,{onChange:this.handleDeductedInput,type:"number",value:this.state.deducted,name:"origin",placeholder:""})),d.a.createElement(C.a,null,d.a.createElement(m.a,{for:"examplePassword"},"Deduction date*"),d.a.createElement(x.a,{onChange:this.handlePaymentDateInput,type:"date",value:this.state.payment_date,name:"origin",placeholder:""})),d.a.createElement(C.a,{check:!0,row:!0},d.a.createElement(h.a,{sm:{size:10,offset:2}},d.a.createElement(w.a,{type:"button",onClick:this.handleSaveChanges},"Add deduction"))))))),d.a.createElement(h.a,{xl:8,lg:12,md:12},d.a.createElement(f.a,null,d.a.createElement(g.a,null,d.a.createElement(R.a,{title:"Expenses",data:this.state.data.map(function(e){return[e.explabel,e.datelabel,e.deducted,e.total,e.paid_sf,e.bal,e.payment_date]}),columns:t,options:a}))))))}}]),t}(d.a.Component);t.default=I}}]);
//# sourceMappingURL=29.eecf1b58.chunk.js.map