(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{754:function(e,t,a){"use strict";var n=a(5),l=a(7),o=a(2),r=a.n(o),c=a(1),s=a.n(c),i=a(4),u=a.n(i),m=a(3),d={children:s.a.node,inline:s.a.bool,tag:m.q,color:s.a.string,className:s.a.string,cssModule:s.a.object},f=function(e){var t=e.className,a=e.cssModule,o=e.inline,c=e.color,s=e.tag,i=Object(l.a)(e,["className","cssModule","inline","color","tag"]),d=Object(m.m)(u()(t,!o&&"form-text",!!c&&"text-"+c),a);return r.a.createElement(s,Object(n.a)({},i,{className:d}))};f.propTypes=d,f.defaultProps={tag:"small",color:"muted"},t.a=f},934:function(e,t,a){"use strict";a.r(t);var n=a(17),l=a(12),o=a(13),r=a(15),c=a(14),s=a(16),i=a(142),u=a(2),m=a.n(u),d=a(131),f=a(132),p=a(117),h=a(121),g=a(62),b=a(118),k=a(110),w=a(47),E=a(48),C=a(49),O=a(754),v=a(73),j=a(50),S=a(28),y=a.n(S),x=a(6),I=a(177),T=a.n(I),F=a(469),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).rerenderParentCallback=function(){Object(j.J)(a.state.xtoken).then(function(e){a.setState(Object(n.a)({},a.state,{data:e.data}))}).catch(function(e){})},a.handleFileInput=function(e){var t=e.target.files[0];a.setState(Object(n.a)({},a.state,{file:t}))},a.handleSaveChanges=function(){var e=new FormData;e.append("csv",a.state.file),Object(j.M)(a.state.xtoken,e).then(function(e){200===e.status?(a.setState(Object(n.a)({},a.state,{file:"",msg:e.message,data:e.data,error:""})),a.forceUpdate()):a.setState(Object(n.a)({},a.state,{error:e.message,msg:""}))}).catch(function(e){a.setState(Object(n.a)({},a.state,{error:"Connection error occured"})),console.log("error",e)})},a.state={file:"",xtoken:"",msg:"",error:"",downloadFile:!0,data:[]},a.csvFileInput=m.a.createRef(),y.a.getItem(x.a.secret).then(function(e){if(null!==e){var t=JSON.parse(e);a.setState(Object(n.a)({},a.state,{xtoken:t.user.token})),Object(j.J)(t.user.token).then(function(e){a.setState(Object(n.a)({},a.state,{data:e.data}))}).catch(function(e){})}}).catch(function(e){console.log("storage error",e)}),a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t={filter:!0,selectableRows:"single",selectableRowsOnClick:!0,filterType:"dropdown",responsive:"vertical",draggableColumns:{enabled:!0},rowsPerPage:5,selectToolbarPlacement:"replace",customToolbarSelect:function(t,a,n){return m.a.createElement(F.a,{rerenderParentCallback:e.rerenderParentCallback,selectedRows:t,displayData:a,setSelectedRows:n,originalData:e.state.data,Xtoken:e.state.xtoken})},downloadOptions:{filename:"trucks-excel-format.csv",separator:";",filterOptions:{useDisplayedColumnsOnly:!0,useDisplayedRowsOnly:!0}},onDownload:function(t,a,n,l){return!!e.state.downloadFile&&"".concat(t(n)).concat(a(l)).trim()},onRowSelectionChange:function(e,t,a){},onRowsDelete:function(e){},onChangePage:function(e){},onSearchChange:function(e){},onColumnSortChange:function(e,t){},onViewColumnsChange:function(e,t){},onFilterChange:function(e,t){},onCellClick:function(e,t){},onRowClick:function(e,t){}};return m.a.createElement(i.a,{title:"Import trucks",breadcrumbs:[{name:"Import",active:!0}]},m.a.createElement(d.a,null,m.a.createElement(f.a,{xl:12,lg:12,md:12},m.a.createElement(p.a,null,m.a.createElement(h.a,null,"Import Trucks"),this.state.error.length>0&&m.a.createElement(g.a,{color:"danger"},this.state.error),this.state.msg.length>0&&m.a.createElement(g.a,{color:"success"},this.state.msg)))),m.a.createElement(d.a,null,m.a.createElement(f.a,{xl:12,lg:12,md:12},m.a.createElement(p.a,null,m.a.createElement(b.a,null,m.a.createElement(k.a,null,m.a.createElement(w.a,null,m.a.createElement(E.a,{for:"exampleFile"},"Upload CSV file"),m.a.createElement(C.a,{ref:this.csvFileInput,onChange:this.handleFileInput,type:"file",name:"file"}),m.a.createElement(O.a,{color:"muted"},"Upload a CSV file to import trucks. Make sure the file is a valid CSV with ",m.a.createElement("b",null,"number,owner,make,vin")," as column headers.")),m.a.createElement(w.a,{check:!0,row:!0},m.a.createElement(f.a,{sm:{size:10,offset:2}},m.a.createElement(v.a,{type:"button",onClick:this.handleSaveChanges},"Import trucks")))))))),m.a.createElement(d.a,null,m.a.createElement(f.a,{xl:12,lg:12,md:12},m.a.createElement(p.a,null,m.a.createElement(b.a,null,m.a.createElement(T.a,{title:"Trucks",data:this.state.data.map(function(e){return[e.id,e.owner,e.number,e.company,e.make,e.vin]}),columns:[{name:"Id",options:{display:!1}},{name:"Oid",options:{display:!1}},"Truck No.","Truck Owner","Truck Make","Truck VIN"],options:t}))))))}}]),t}(m.a.Component);t.default=R}}]);
//# sourceMappingURL=38.fcb65e01.chunk.js.map