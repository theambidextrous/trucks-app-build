(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{140:function(e,a,t){"use strict";var r=t(17),l=t(1),n=t.n(l),s=(t(24),t(32)),c=t(215),o=t(216),u=t(141),i=s.a.create("page"),m=function(e){var a=e.title,t=e.breadcrumbs,l=e.tag,s=e.className,m=e.children,d=Object(r.a)(e,["title","breadcrumbs","tag","className","children"]),b=i.b("px-3",s);return n.a.createElement(l,Object.assign({className:b},d),n.a.createElement("div",{className:i.e("header")},a&&"string"===typeof a?n.a.createElement(u.a,{type:"h1",className:i.e("title")},a):a,t&&n.a.createElement(c.a,{className:i.e("breadcrumb")},n.a.createElement(o.a,null,"BlueTrux"),t.length&&t.map(function(e,a){var t=e.name,r=e.active;return n.a.createElement(o.a,{key:a,active:r},t)}))),m)};m.defaultProps={tag:"div",title:""},a.a=m},141:function(e,a,t){"use strict";var r=t(36),l=t(17),n=t(5),s=t.n(n),c=t(1),o=t.n(c),u=(t(24),{h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6","display-1":"h1","display-2":"h1","display-3":"h1","display-4":"h1",p:"p",lead:"p",blockquote:"blockquote"}),i=function(e){var a,t=e.tag,n=e.className,c=e.type,i=Object(l.a)(e,["tag","className","type"]),m=s()(Object(r.a)({},c,!!c),n);return a=t||(!t&&u[c]?u[c]:"p"),o.a.createElement(a,Object.assign({},i,{className:m}))};i.defaultProps={type:"p"},a.a=i},940:function(e,a,t){"use strict";t.r(a);var r=t(10),l=t(12),n=t(13),s=t(15),c=t(14),o=t(16),u=t(140),i=t(25),m=t(17),d=t(1),b=t.n(d),g=(t(24),t(106)),p=t(120),v=t(118),E=t(938),f=t(141),h=function(e){var a=e.title,t=e.subtitle,r=e.number,l=e.color,n=e.progress,s=n.value,c=n.label,o=Object(m.a)(e,["title","subtitle","number","color","progress"]);return b.a.createElement(g.a,Object.assign({body:!0},o),b.a.createElement("div",{className:"d-flex justify-content-between"},b.a.createElement(p.a,{tag:"div"},b.a.createElement(f.a,{className:"mb-0"},b.a.createElement("strong",null,a)),b.a.createElement(f.a,{className:"mb-0 text-muted small"},t)),b.a.createElement(v.a,{className:"text-".concat(l)},r)),b.a.createElement(E.a,{value:s,color:l,style:{height:"8px"}}),b.a.createElement(p.a,{tag:"div",className:"d-flex justify-content-between"},b.a.createElement(f.a,{tag:"span",className:"text-left text-muted small"},c),b.a.createElement(f.a,{tag:"span",className:"text-right text-muted small"},s,"%")))};h.defaultProps={title:"",subtitle:"",number:0,color:"primary",progress:{value:0,label:""}};var y=function(e){var a=e.title,t=(e.subtitle,e.number),r=e.color,l=e.progress,n=(l.value,l.label,Object(m.a)(e,["title","subtitle","number","color","progress"]));return b.a.createElement(g.a,Object.assign({body:!0},n),b.a.createElement("div",{className:"displaywidgetdiv justify-content-between"},b.a.createElement(p.a,{tag:"div"},b.a.createElement(f.a,{className:"mb-0 displaywidget"},b.a.createElement("strong",{className:"displaywidgetTitle text-"+r},t),b.a.createElement("br",null),b.a.createElement("small",null,""+a)))))};y.defaultProps={title:"",subtitle:"",number:0,color:"primary",progress:{value:0,label:""}};var x=y,k=t(36),_=t(5),N=t.n(_),C=t(117),S=t(119),j=function(e){var a=e.bgColor,t=e.icon,r=e.iconProps,l=e.title,n=e.subtitle,s=e.className,c=Object(m.a)(e,["bgColor","icon","iconProps","title","subtitle","className"]),o=N()("cr-widget",s,Object(k.a)({},"bg-".concat(a),a));return b.a.createElement(g.a,Object.assign({inverse:!0,className:o},c),b.a.createElement(C.a,{className:"cr-widget__icon"},b.a.createElement(t,Object.assign({size:50},r))),b.a.createElement(C.a,null,b.a.createElement(v.a,null,l),b.a.createElement(S.a,null,n)))};j.defaultProps={bgColor:"primary",icon:"span",iconProps:{size:50}};var w=t(21),O=t(768),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"primary";return"undefined"===typeof window?null:window.getComputedStyle(document.documentElement).getPropertyValue("--".concat(e))},B=(t(910),t(4)),T=t(29),L=t(27),R=t.n(L),F=t(104),P=t(105),V=t(108),M=t(107),z=function(e){function a(e){var t;return Object(l.a)(this,a),(t=Object(s.a)(this,Object(c.a)(a).call(this,e))).genRevenueLineData=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{labels:t.extractSetMonthKeys(e),datasets:[Object(r.a)({label:"Revenue($)",backgroundColor:D("secondary"),borderColor:D("secondary"),fill:!1,borderWidth:1,data:t.extractSetRevValues(e)},a)]}},t.genTruckRevHoriBarData=function(e){return{data:{labels:t.extractSetKeys(e),datasets:[{label:"Truck revenue($)",backgroundColor:D("secondary"),borderColor:D("secondary"),borderWidth:1,hoverBackgroundColor:D("secondary"),hoverBorderColor:D("secondary"),data:t.extractSetValues(e)}]},options:{scales:{xAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)"}}],yAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)"}}]}}}},t.genDriverRevenueBarData=function(e){return{labels:t.extractSetKeys(e),datasets:[{label:"Driver revenue",data:t.extractSetValues(e),backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],borderWidth:1}]}},t.genFuelConsumptionLineData=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{labels:t.extractSetMonthKeys(e),datasets:[Object(r.a)({label:"Consumption($)",backgroundColor:D("secondary"),borderColor:D("secondary"),fill:!1,borderWidth:1,data:t.extractSetRevValues(e)},a)]}},t.genFuelMilesScatterData=function(e,a){return{datasets:[{label:"Fuel",data:e,backgroundColor:D("secondary")},{label:"Miles",data:a,backgroundColor:D("success")}]}},t.genFuelRevenueScatterData=function(e,a){return{datasets:[{label:"Fuel",data:e,backgroundColor:D("secondary")},{label:"Revenue",data:a,backgroundColor:D("danger")}]}},t.genFuelWeightScatterData=function(e,a){return{datasets:[{label:"Fuel",data:e,backgroundColor:D("warning")},{label:"Weight",data:a,backgroundColor:D("primary")}]}},t.genBrokerLoadsCountHoriBarData=function(e){return{data:{labels:t.extractSetKeys(e),datasets:[{label:"Load count",backgroundColor:D("primary"),borderColor:D("primary"),borderWidth:1,hoverBackgroundColor:D("primary"),hoverBorderColor:D("primary"),data:t.extractSetValues(e)}]},options:{scales:{xAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)"},ticks:{beginAtZero:!0}}],yAxes:[{gridLines:{color:"rgba(0, 0, 0, 0)"}}]}}}},t.extractSetMonthKeys=function(e){var a=[];return e.forEach(function(e){var t=Object.keys(e)[0];a.push(t.split("~")[1])}),a},t.extractSetRevValues=function(e){var a=[];return e.forEach(function(e){var t=Object.values(e)[0];a.push(t.split("~")[0])}),a},t.extractSetExpValues=function(e){var a=[];return e.forEach(function(e){var t=Object.values(e)[0];a.push(t.split("~")[1])}),a},t.extractSetKeys=function(e){var a=[];return e.forEach(function(e){a.push(Object.keys(e)[0])}),a},t.extractSetValues=function(e){var a=[];return e.forEach(function(e){a.push(Object.values(e)[0])}),a},t.genTopExpensePieData=function(e){var a=t.extractSetKeys(e);return{datasets:[{data:t.extractSetValues(e),backgroundColor:[D("primary"),D("secondary"),D("success"),D("info"),D("danger")],label:a[0]}],labels:a}},t.genLoadsByTruckPieData=function(e){var a=t.extractSetKeys(e);return{datasets:[{data:t.extractSetValues(e).slice(0,5),backgroundColor:[D("primary"),D("secondary"),D("success"),D("info"),D("danger")],label:a[0]}],labels:a.slice(0,5)}},t.genTruckMileagePieData=function(e){var a=t.extractSetKeys(e);return{datasets:[{data:t.extractSetValues(e).slice(0,5),backgroundColor:[D("primary"),D("secondary"),D("success"),D("info"),D("danger")],label:a[0]}],labels:a.slice(0,5)}},t.state={visualizations:[],revexp:[],toptentrucks:[],driver_rev:[],fuel_cons:[],broker_loads:[],fuel_mile:[],fuel_rev:[],fuel_weight:[],has_reminders:"",is_near:0,reminders:[],xtoken:""},R.a.getItem(B.a.secret).then(function(e){if(null!==e){var a=JSON.parse(e);Object(T.E)(a.user.token).then(function(e){t.setState(Object(r.a)({},t.state,{xtoken:a.user.token,is_near:a.user.is_near,visualizations:e.data,revexp:e.data.revexp,toptentrucks:e.data.top_ten,driver_rev:e.data.driver_rev,fuel_cons:e.data.fuel_cons,broker_loads:e.data.broker_loads,fuel_mile:e.data.fuel_mile,fuel_rev:e.data.fuel_rev,fuel_weight:e.data.fuel_weight,has_reminders:e.data.has_reminders,reminders:e.data.reminders})),console.log("reminders data",e.data.reminders)}).catch(function(e){console.log("respError",e)}),Object(T.B)(a.user.token).then(function(e){1===parseInt(e.expired)&&(window.location.href="/bills/payment")}).catch(function(e){return console.log(e)})}}).catch(function(e){console.log("storage error",e)}),t}return Object(o.a)(a,e),Object(n.a)(a,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this;D("primary"),D("secondary");return b.a.createElement(i.a,null,function(a){return b.a.createElement(u.a,{className:"DashboardPage",title:"BlueTrux",breadcrumbs:[{name:"Dashboard",active:!0}]},b.a.createElement(F.a,null,b.a.createElement(P.a,{lg:12,md:12,sm:12,xs:12},0===parseInt(a.state.user.has_setup)&&b.a.createElement(V.a,{color:"danger"},"You have not completed your ",b.a.createElement("b",null,"BlueTrux")," system setup.",b.a.createElement(w.a,{target:"_self",href:"/co/setup"}," "," Complete setup")),1===parseInt(e.state.is_near)&&b.a.createElement(V.a,{color:"danger"},"Your account is almost",b.a.createElement(w.a,{target:"_self",href:"/bills/billing"}," "," ",b.a.createElement("b",null,"expiring")),"."," "," To avoid service disruption",b.a.createElement(w.a,{target:"_self",href:"/bills/payment"}," "," ",b.a.createElement("b",null,"Upgrade now"))))),1===parseInt(e.state.has_reminders)&&b.a.createElement(F.a,null,b.a.createElement(P.a,{lg:12,md:12,sm:12,xs:12},b.a.createElement(V.a,{color:"danger"},b.a.createElement("b",null,"System Notifications")," ",b.a.createElement("br",null),b.a.createElement("p",null,"The following trucks have got expired documents"),b.a.createElement("ul",null,e.state.reminders.map(function(e,a){return b.a.createElement("li",null,e.tlabel)}))))),b.a.createElement(F.a,null,b.a.createElement(P.a,{className:"small-padding",xl:3,md:6,sm:12,xs:12},b.a.createElement(x,{title:"Monthily revenue",number:e.state.visualizations.revenue,color:"secondary"})),b.a.createElement(P.a,{className:"small-padding",xl:3,md:6,sm:12,xs:12},b.a.createElement(x,{title:"Trucks",number:e.state.visualizations.trucks,color:"danger"})),b.a.createElement(P.a,{className:"small-padding",xl:3,md:6,sm:12,xs:12},b.a.createElement(x,{title:"Monthily expenses",number:e.state.visualizations.expenses,color:"primary"})),b.a.createElement(P.a,{className:"small-padding",xl:3,md:6,sm:12,xs:12},b.a.createElement(x,{title:"Trips",number:e.state.visualizations.trips,color:"success"}))),b.a.createElement("br",null),b.a.createElement(F.a,null,b.a.createElement(P.a,{xl:6,lg:12,md:12},b.a.createElement(g.a,null,b.a.createElement(M.a,{className:"text-secondary"},"Revenue"),b.a.createElement(C.a,null,b.a.createElement(O.Line,{data:e.genRevenueLineData(e.state.revexp,{type:"line",fill:!1})})))),b.a.createElement(P.a,{xl:6,lg:12,md:12},b.a.createElement(g.a,null,b.a.createElement(M.a,{className:"text-primary"},"Truck revenue"),b.a.createElement(C.a,null,b.a.createElement(O.HorizontalBar,{data:e.genTruckRevHoriBarData(e.state.toptentrucks).data,options:e.genTruckRevHoriBarData(e.state.toptentrucks).options})))),b.a.createElement(P.a,{xl:6,lg:12,md:12},b.a.createElement(g.a,null,b.a.createElement(M.a,{className:"text-primary"},"Driver revenue"),b.a.createElement(C.a,null,b.a.createElement(O.Bar,{data:e.genDriverRevenueBarData(e.state.driver_rev)})))),b.a.createElement(P.a,{xl:6,lg:12,md:12},b.a.createElement(g.a,null,b.a.createElement(M.a,{className:"text-primary"},"Fuel Consumption"),b.a.createElement(C.a,null,b.a.createElement(O.Line,{data:e.genFuelConsumptionLineData(e.state.fuel_cons,{type:"line",fill:!1})})))),b.a.createElement(P.a,{xl:6,lg:12,md:12},b.a.createElement(g.a,null,b.a.createElement(M.a,{className:"text-primary"},"Fuel vs Miles"),b.a.createElement(C.a,null,b.a.createElement(O.Scatter,{data:e.genFuelMilesScatterData(e.state.fuel_mile.f,e.state.fuel_mile.m)})))),b.a.createElement(P.a,{xl:6,lg:12,md:12},b.a.createElement(g.a,null,b.a.createElement(M.a,{className:"text-primary"},"Fuel vs Revenue"),b.a.createElement(C.a,null,b.a.createElement(O.Scatter,{data:e.genFuelRevenueScatterData(e.state.fuel_rev.f,e.state.fuel_rev.r)})))),b.a.createElement(P.a,{xl:6,lg:12,md:12},b.a.createElement(g.a,null,b.a.createElement(M.a,{className:"text-primary"},"Fuel vs Weight"),b.a.createElement(C.a,null,b.a.createElement(O.Scatter,{data:e.genFuelWeightScatterData(e.state.fuel_weight.f,e.state.fuel_weight.w)})))),b.a.createElement(P.a,{xl:6,lg:12,md:12},b.a.createElement(g.a,null,b.a.createElement(M.a,{className:"text-secondary"},"Count of Loads by Broker"),b.a.createElement(C.a,null,b.a.createElement(O.HorizontalBar,{data:e.genBrokerLoadsCountHoriBarData(e.state.broker_loads).data,options:e.genBrokerLoadsCountHoriBarData(e.state.broker_loads).options}))))))})}}]),a}(b.a.Component);a.default=z}}]);
//# sourceMappingURL=28.bbfe36e6.chunk.js.map